import sys
from itertools import combinations

def arrange(inputList):
    sortedList = sorted(inputList)
    arrangedList = [[sortedList[0][1]]]
    j = 0
    for i in range(1, len(sortedList)):
        if sortedList[i][0] == sortedList[i - 1][0]:
            arrangedList[j].append(sortedList[i][1])
        else:
            arrangedList.append([sortedList[i][1]])
            j += 1
    return arrangedList

T = int(sys.stdin.readline())

for i in range(T):
    n = int(sys.stdin.readline())
    cloths = []
    for j in range(n):
        name, group = map(str, sys.stdin.readline().split())
        cloths.append([group, name])
    cloths = arrange(cloths)
    idx = []
    for j in range(len(cloths)):
        idx.append(j)
    ans = 0
    for j in range(1, len(cloths) + 1):
        idxList = list(combinations(idx, j))
        for k in range(len(idxList)):
            temp = 1
            for l in range(len(idxList[k])):
                temp *= len(cloths[idxList[k][l]])
            ans += temp
    print(ans)
